# Интеграция с Яндекс.Диском

## Архитектура

Каждый пользователь может подключить свой Яндекс.Диск для хранения видео:
- Исходные видео загружаются на Яндекс.Диск пользователя
- Фрагменты также сохраняются на Яндекс.Диск
- Видео воспроизводятся напрямую с Яндекс.Диска через временные ссылки

## Настройка OAuth приложения

1. Перейди на https://oauth.yandex.ru/
2. Создай новое приложение:
   - Название: "Видео Архив"
   - Платформа: "Веб-сервис"
   - Callback URL: `http://localhost:3000/yandex/callback` (для разработки)
3. Включи доступ к Яндекс.Диску (чтение + запись)
4. Скопируй `client_id` и `client_secret`

## Настройка сервера

Добавь в `backend/.env`:

```
YANDEX_CLIENT_ID=your_client_id_here
YANDEX_CLIENT_SECRET=your_client_secret_here
YANDEX_REDIRECT_URI=http://localhost:3000/yandex/callback
```

## API Endpoints

### Получить URL для авторизации
```
GET /api/yandex/auth-url
Headers: Authorization: Bearer <token>
```

### Подключить Яндекс.Диск
```
POST /api/yandex/connect
Headers: Authorization: Bearer <token>
Body: {"code": "oauth_code_from_yandex"}
```

### Проверить статус
```
GET /api/yandex/status
Headers: Authorization: Bearer <token>
```

### Отключить Яндекс.Диск
```
POST /api/yandex/disconnect
Headers: Authorization: Bearer <token>
```

## Использование

1. Пользователь авторизуется в системе
2. Переходит в настройки -> Подключить Яндекс.Диск
3. Нажимает "Подключить", открывается окно Яндекс.OAuth
4. После авторизации код передается на бэкенд
5. Токен сохраняется в базе данных
6. Все новые видео автоматически загружаются на Яндекс.Диск

## Преимущества

- ✅ Нет ограничений по месту на сервере
- ✅ Дешевле чем S3 хранилище
- ✅ Пользователь контролирует свои данные
- ✅ Видео доступны 24/7 через CDN Яндекса

## Ограничения

- Нужен интернет для просмотра
- Лимиты API Яндекс.Диска (можно увеличить для платных аккаунтов)
- Токен нужно обновлять каждые 180 дней
